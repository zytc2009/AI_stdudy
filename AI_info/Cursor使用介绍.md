# Cursor 配置与使用技巧完全指南

Cursor 是目前最强大的 AI 辅助编程工具之一。为了帮助你最大化其效能并控制成本，本指南将从基础配置、进阶技巧、MCP 与 Rules（Skill）、成本控制及工具搭配五个维度进行整理。

---

## 一、 基础配置与核心设置

正确的配置是高效使用的基石。

### 1. 模型选择
Cursor 支持多种模型，选择合适的模型是平衡质量与速度的关键。
*   **Claude 3.5 Sonnet:** 目前公认的**编程最强模型**，逻辑推理和代码生成能力极佳，推荐作为主力模型。
*   **GPT-4o:** 综合能力强，适合通用任务，但在复杂代码重构上略逊于 Claude 3.5。
*   **cursor-small / claude-3-haiku:** 极速且便宜，适合简单的代码补全或快速提问，不推荐用于复杂逻辑生成。

### 2. 索引与代码库理解
*   **开启 Codebase Indexing:** 在设置中开启此功能。Cursor 会将你的代码库向量化，使得 AI 在回答时能通过语义搜索引用整个项目的上下文，而不仅仅是当前打开的文件。
*   **重新索引:** 当项目结构发生重大变更或 `.gitignore` 更新后，建议手动触发重新索引。

### 3. 隐私模式
* 如果代码涉及敏感业务，请在设置中开启 **"Privacy Mode"**。

  进入 `Settings (齿轮图标) -> General -> Privacy`, 开启后，你的代码不会被用于训练 Cursor 的模型。

* **`.cursorignore` 文件**：  

  类似于 `.gitignore`。  

  **作用**：告诉 Cursor 的代码库索引引擎（Codebase Indexing）忽略某些文件或目录。  

  **建议配置**：忽略编译产物、海量日志文件、大型媒体测试文件或包含敏感凭证的配置文件。这不仅能提高 AI 索引速度，还能在后续调用 API 时**避免无关文件被发送，从而节省大量 Token 成本**。

  ```
  # .cursorignore 示例  
  modules/  
  build/
  tmp/
  *.log  
  ```

### 4.配置自定义 API Key

* **配置路径**：`Settings -> Models -> API Keys`。  
* **支持服务**：OpenAI, Anthropic, Google, 兼容 OpenAI 格式的第三方接口（例如部署在公司内网的网关）。  
* **注意**：开启自定义 API Key 后，相关请求将走你配置的通道，按 Token 扣费，不再消耗 Cursor 官方的高级请求额度。如果团队有统一的 API 池（例如自建的 LLM 路由），可以完全通过基础版 Cursor 配合自定义 Key 享受强大功能。



---

## 二、 高效使用技巧

### 1. 两种核心交互模式
*   **Chat (Ctrl/Cmd + L):** 适合提问、探索代码、调试错误。当你需要“咨询”而不是直接“改代码”时使用。生成的代码需要手动点击应用。
    * **上下文感知**：选中代码按 `Ctrl + L`，这部分代码会自动进入侧边栏。你可以问：“这段代码的并发竞争风险在哪里？”  
    * **`Ctrl + Enter` (Codebase)**：让 AI 扫描整个项目（如 Matrx 系统）来回答问题。  
*   **Composer (Ctrl/Cmd + I):** **这是 Cursor 的杀手锏。** 它可以直接在你的编辑器中多文件编辑。你只需描述需求，它会直接修改相关文件，并展示 Diff 视图供你确认。生成后可以点击 **`Accept All`** 一键应用所有更改。

### 2. 掌握 `@` 符号 (上下文控制)
精准的上下文是生成高质量代码的关键，避免 AI “胡编乱造”。
*   `@Files`: 引用特定文件。
*   `@Folders`: 引用整个文件夹（谨慎使用，消耗 Token）。
*   `@Codebase`: 让 AI 在整个代码库中搜索相关逻辑。
*   `@Docs`: 引入第三方文档（如 React, Next.js 官方文档），让 AI 根据最新的 API 编写代码。
*   `@Web`: 联网搜索，适合查询最新的库版本或解决报错。
*   **`@Terminals`**：让 AI 直接读取终端里的编译报错日志，无需复制粘贴。

### 3. 快捷键与操作流
*   **Tab 键:** 不仅仅是补全。Cursor 的 Tab 可以预测你的下一步修改，例如修改完变量名后，它会自动建议修改引用处的变量，连续按 Tab 可以批量修改。
*   **Ctrl+K (Inline Edit):** 选中一段代码，按 Ctrl+K 可以直接重写或优化该段代码，比在聊天框里修改更直观。

### 4.Agent 与 Plan 的协同

* **Plan**：在侧边栏切换到 Agent 模式，提出需求。AI 会先思考并列出执行步骤 (Plan)。  
* **Agent 工作流**：AI 会自动搜索代码库、执行终端命令（如 `ls`, `grep`）、修改文件，甚至运行 `go test`。若测试失败，Agent 会自行循环 Debug 知道通过。

---

## 三、 MCP 与 Skill (Rules) 深度使用

### 1. MCP (Model Context Protocol)
MCP 是 Anthropic 推出的协议，允许 AI 模型与外部工具（数据库、API、本地文件系统）安全交互。Cursor 对此有良好支持。

*   **作用:** 让 Cursor 能够读取你的本地数据库、查询 PostgreSQL、操作浏览器或访问 GitHub Issues。
*   **配置方法:**
    1.  进入设置 -> MCP。
    2.  添加 MCP Server（通常是一个 JSON 配置）。
    3.  **示例场景:** 配置一个 PostgreSQL MCP Server，你可以直接问 Cursor：“根据 `users` 表的结构，帮我生成对应的 Go struct 和 CRUD 接口。” Cursor 会直接查询数据库结构，无需你手动粘贴 SQL。
    4.  **进阶玩法:** 配置 `Puppeteer` MCP，让 Cursor 能够截图、抓取网页数据并在代码中使用。

### 2. Skills (Project Rules / .cursorrules)
Cursor 允许通过规则文件定义 AI 的“技能”或行为规范，这相当于给 AI 设定了“人设”和“项目宪法”。

- **提示词撰写三原则**

  **明确角色**：“作为一名资深 C++ 开发，熟悉 RTC 架构...”  

  **约束条件**：“不要使用第三方库，保持线程安全，注意内存对齐。”  

  **提供示例**：如果有现成的代码风格，用 `@` 引入给它参考。

* **.cursorrules 文件:** 在项目根目录下创建 `.cursorrules` 文件。
*   **配置内容示例:**
    
    ```markdown
    # 项目规则
    - 使用中文回复。
    - 使用 TypeScript 严格模式。
    - 每个函数必须包含 JSDoc 注释。
    - 后端 API 遵循 RESTful 规范，统一返回格式 { code, data, message }。
    - 禁止使用 `any` 类型。
    - 当涉及到数据库操作时，优先使用 Prisma Client。

*   **效果:** 无论你在 Chat 还是 Composer 中提问，AI 都会默认遵循这些规则。这对于保持团队代码风格统一至关重要。

---

## 四、 如何控制成本

Cursor 采用订阅制（Pro 版 $20/月），包含 500 次快速请求，超出后会降速或产生额外费用。以下是省钱策略：

### 1. 模型降级策略
*   **简单任务用小模型:** 代码补全、写注释、简单的单元测试，使用 `claude-4-haiku` 或 `gpt-4o-mini`。
*   **复杂任务用大模型:** 架构设计、复杂 Bug 修复、重构核心逻辑时才使用 `claude-4-sonnet`或 `GPT-5(Standard)`。
*   **疑难“排雷战”:**`OpenAI o1` 或 `o3-mini`
*   **善用 Slow Requests:** 任务不紧急时（如写文档），使用官方 Pro 订阅的 Slow Requests。低峰期等待数秒即可免费使用顶级模型.

### 2. 上下文管理
*   **精简引用:** 不要盲目使用 `@Codebase` 或引用超大文件。尽量只引用相关的文件（`@Files`）。上下文越大，消耗的 Token 越多，不仅贵，而且推理速度会变慢。
*   **关闭无关文件:** 如果不小心把巨大的日志文件或构建产物加到了上下文中，使用 `Clear` 清除聊天历史。

### 3. 提示词工程
*   **一次性说清:** 避免来回拉扯。一次性提供清晰的需求、示例和约束条件，减少 AI 试错次数。
*   **结构化输入:** 使用伪代码或清晰的步骤描述需求。

### 4. 设置使用限制
*   在 Cursor 设置中，可以查看当月的请求使用量统计。如果发现用量激增，检查是否有不必要的长上下文对话。
*   **Hard Limit**：在供应商后台（如 OpenAI Platform）设定每月消费上限（如 $50）。  
*   **Soft Limit**：设定预警线（如 $30），及时排查异常消耗。

---

## 五、 与其他工具搭配

Cursor 不是孤岛，与其他工具配合能发挥 1+1>2 的效果。

### 1. Git 与版本控制
*   **Commit Message 生成:** Cursor 自带生成 Commit Message 功能，非常精准。
*   **Diff 检查:** Composer 修改代码后，务必使用 Git Diff 查看变更，确保没有引入意外的破坏性修改。

### 2. 终端工具
*   **Cursor Terminal:** Cursor 内置终端。当 AI 给出安装命令时，可以直接点击“Run in Terminal”执行。
*   **错误修复闭环:** 终端报错时，直接复制错误信息给 Cursor (Cmd+L)，它会自动分析并修复。

### 3. 设计工具
*   **VS Figma:** 安装 Figma 插件，将设计稿链接发给 Cursor，它可以根据链接生成前端代码（需配合 `@Web` 或插件功能）。
*   **Screenshot to Code:** 截图粘贴到 Cursor 聊天框，AI 可以将截图还原为 HTML/Tailwind 代码。

### 4. API 测试工具
*   **配合 Postman/Hoppscotch:** 当你需要编写 API 调用代码时，将 API 文档链接或 Curl 命令直接发给 Cursor：“根据这个 Curl 命令，帮我写一个 Axios 封装函数”。

### 5. 文档工具
*   **Notion/Linear:** 如果团队使用 Notion 管理需求，可以将需求描述复制给 Cursor，让它生成代码框架，或者使用 MCP 连接 Linear 自动获取 Issue 内容。

---

## 总结建议

1.  **拥抱 Composer:** 它是最高效的交互方式。
2.  **善用 .cursorrules:** 花时间配置一份适合项目的规则文件，能极大减少代码修正时间。
3.  **精准投喂:** 少即是多，只给 AI 它需要的上下文。
4.  **人机协作:** AI 写初版代码，人类负责 Code Review 和架构把控。

通过这套配置和工作流，你可以将 Cursor 变成一个懂项目规范、懂业务逻辑的“超级实习生”，而不是一个只会机械回答问题的聊天机器人。

